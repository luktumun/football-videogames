
<div class="wrapper">
  <h2>Sport Video List</h2>
<p *ngIf="!videos || videos.length === 0">Loading...</p>

  <div
    class="card"
    *ngFor="let video of videos; trackBy: trackByVideoId"
    role="listitem"
    [attr.data-testid]="'video-card-' + video._id"
  >
  <div class="card-left">
      <h2 class="video.title" style="color: #1e90ff;">{{ video.soccermatch }}</h2>

    
          <!-- Show video player if activeVideoId matches -->
          <div *ngIf="activeVideoId === video._id">
            <youtube-player
              [videoId]="extractYoutubeId(video.videourl) ?? undefined"
              [height]="300"
              [width]="500"
              class="video-frame"
              (stateChange)="onPlayerStateChange($event, video)"
              [playerVars]="{ autoplay: 1, mute: 1, rel: 0 }"
              [attr.data-testid]="'youtube-player-' + video._id"
              [attr.key]="video._id"
            ></youtube-player>
          </div>
         
        
          <!-- Show thumbnail if not active -->
          <div *ngIf="activeVideoId !== video._id" class="thumbnail-wrapper" (click)="playVideoHandler(video)">
            <img
              [src]="getThumbnail(video)"
              alt="Preview of {{ video.soccermatch }}"
              class="thumbnail"
            />
            <div class="play-icon" aria-hidden="true">â–¶</div>
          </div>
        </div>
        <!-- Right: Description and Downloads -->
        <div class="card-right">
          <div *ngIf="video.description" class="video-description">
            <ul>
              <li style="color: #2c3e50;" *ngFor="let line of getDescriptionLines(video.description)">
                {{ line }}
              </li>
            </ul>
          </div>

          <div *ngIf="video.torrentdownloadlink" class="download-link1">
            <a style="color: #e34023;"
              [href]="transformDropboxUrl(video.torrentdownloadlink)"
              target="_blank"
              rel="noopener"
              download
              class="download-link"
              [attr.data-testid]="'dropbox-link-' + video._id"
            >
              ðŸ“¥ Download from Dropbox
            </a>
            <a style="color: #e34023;"
              [href]="video.torrentdownloadlink"
              target="_blank"
              rel="noopener"
              class="magnet-link"
              [attr.data-testid]="'magnet-link-' + video._id"
            >
              ðŸ§² Open Magnet Link
            </a>
          </div>
        </div>
      </div>
    </div>
  