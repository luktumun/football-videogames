


<div class="wrapper" >
  
<h2>PC Game List</h2>
<p *ngIf="!games || games.length === 0">Loading...</p>
  <div
    class="card"
    *ngFor="let game of games; trackBy: trackByGameId"
    role="listitem"
    [attr.data-testid]="'game-card-' + game._id"
  >
    <div class="card-left">
      <h2 class="video-title" style="color: #1e90ff;">{{ game.title }}</h2>

     
          <div *ngIf="activeGameId === game._id">
            <youtube-player
              [videoId]="extractYoutubeId(game.url) ?? undefined"
              [height]="300"
              [width]="500"
              class="video-frame"
              (stateChange)="onPlayerStateChange($event, game)"
              [playerVars]="{ autoplay: 1, mute: 1, rel: 0 }"
              [attr.data-testid]="'youtube-player-' + game._id"
              [attr.key]="game._id"
            ></youtube-player>
          </div>

          <!-- Show thumbnail if not active -->
          <div *ngIf="activeGameId !== game._id" class="thumbnail-wrapper" (click)="playGameHandler(game)">
            <img
              [src]="getThumbnail(game)"
              alt="Preview of {{ game.title }}"
              class="thumbnail"
            />
            <div class="play-icon" aria-hidden="true">â–¶</div>
          </div>
        </div>

        <!-- Right: Description and Downloads -->
        <div class="card-right">
          <div *ngIf="game.description" class="video-description">
            <ul>
              <li style="color: #2c3e50;" *ngFor="let line of getDescriptionLines(game.description)">
                {{ line }}
              </li>
            </ul>
          </div>

          <div *ngIf="game.url1" class="download-link">
            <a
              style="color: #eb2626;"
              [href]="transformDropboxUrl(game.url1)"
              target="_blank"
              rel="noopener"
              download
              class="download-link"
              [attr.data-testid]="'dropbox-link-' + game._id"
            >
              ðŸ“¥ Download from Dropbox
            </a>
            <a
              style="color: #e34023;"
              [href]="game.url1"
              target="_blank"
              rel="noopener"
              class="magnet-link"
              [attr.data-testid]="'magnet-link-' + game._id"
            >
              ðŸ§² Open Magnet Link
            </a>
          </div>
        </div>
      </div>
   
</div>